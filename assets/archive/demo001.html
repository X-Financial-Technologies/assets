<!DOCTYPE html>
<html>
<head>
    <style>
        .demo-container {
            width: 800px;
            height: 600px;
            background: #fafafa;
            margin: 0 auto;
            padding: 20px;
            font-family: Arial, sans-serif;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-radius: 12px;
        }

        .balance-display {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }

        .balance-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            width: 200px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: transform 0.3s ease;
        }

        .balance-card:hover {
            transform: translateY(-5px);
        }

        .balance-card h3 {
            color: #1A374D;
            margin: 0 0 10px 0;
            font-size: 24px;
        }

        .balance-value {
            font-size: 28px;
            font-weight: bold;
            color: #467885;
        }

        .flow-diagram {
            position: relative;
            height: 200px;
            margin: 40px 0;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .progress-bar {
            height: 8px;
            background: #e0e0e0;
            width: 100%;
            margin: 20px 0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, #467885, #1A374D);
            width: 0%;
            transition: width 1s ease;
            border-radius: 4px;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        .step {
            text-align: center;
            color: #666;
            font-size: 14px;
            transition: color 0.3s ease;
        }

        .step.active {
            color: #467885;
            font-weight: bold;
        }

        .animation-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            color: #467885;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .animation-overlay.visible {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <div class="balance-display">
            <div class="balance-card">
                <h3>USD</h3>
                <div id="usd-balance" class="balance-value">1000.00</div>
            </div>
            <div class="balance-card">
                <h3>USDX</h3>
                <div id="usdx-balance" class="balance-value">0.00</div>
            </div>
            <div class="balance-card">
                <h3>wUSDX</h3>
                <div id="wusdx-balance" class="balance-value">0.00</div>
            </div>
        </div>
        <div class="flow-diagram" id="flow-diagram">
            <div class="animation-overlay" id="animation-overlay"></div>
        </div>
        <div class="progress-bar">
            <div class="progress" id="demo-progress"></div>
        </div>
        <div class="step-indicator">
            <div class="step" id="step-1">Mint</div>
            <div class="step" id="step-2">Wrap</div>
            <div class="step" id="step-3">Yield</div>
        </div>
    </div>
    <script>
        class DemoController {
            constructor() {
                this.usdBalance = 1000.00;
                this.usdxBalance = 0.00;
                this.wusdxBalance = 0.00;
                this.yieldRate = 0.05;
                this.setupElements();
                this.startDemo();
            }

            setupElements() {
                this.usdElement = document.getElementById('usd-balance');
                this.usdxElement = document.getElementById('usdx-balance');
                this.wusdxElement = document.getElementById('wusdx-balance');
                this.progressElement = document.getElementById('demo-progress');
                this.overlayElement = document.getElementById('animation-overlay');
                this.steps = {
                    1: document.getElementById('step-1'),
                    2: document.getElementById('step-2'),
                    3: document.getElementById('step-3')
                };
            }

            showAnimation(text, duration = 1000) {
                this.overlayElement.textContent = text;
                this.overlayElement.classList.add('visible');
                setTimeout(() => {
                    this.overlayElement.classList.remove('visible');
                }, duration);
            }

            updateStep(step) {
                Object.values(this.steps).forEach(s => s.classList.remove('active'));
                this.steps[step].classList.add('active');
            }

            updateBalances() {
                this.usdElement.textContent = this.usdBalance.toFixed(2);
                this.usdxElement.textContent = this.usdxBalance.toFixed(2);
                this.wusdxElement.textContent = this.wusdxBalance.toFixed(2);
            }

            async mintUSDX(amount) {
                this.updateStep(1);
                this.showAnimation('Minting USDX...');
                this.usdBalance -= amount;
                this.usdxBalance += amount;
                this.updateBalances();
                this.progressElement.style.width = '33%';
            }

            async wrapUSDX() {
                this.updateStep(2);
                this.showAnimation('Wrapping USDX...');
                this.wusdxBalance += this.usdxBalance;
                this.usdxBalance = 0;
                this.updateBalances();
                this.progressElement.style.width = '66%';
            }

            async accrueYield() {
                this.updateStep(3);
                this.showAnimation('Accruing Yield...');
                const dailyYield = this.wusdxBalance * (this.yieldRate / 365);
                this.wusdxBalance += dailyYield;
                this.updateBalances();
                this.progressElement.style.width = '100%';
            }

            async startDemo() {
                await new Promise(r => setTimeout(r, 1000));
                await this.mintUSDX(500);
                
                await new Promise(r => setTimeout(r, 2000));
                await this.wrapUSDX();
                
                await new Promise(r => setTimeout(r, 2000));
                await this.accrueYield();
            }
        }

        window.onload = () => new DemoController();
    </script>
</body>
</html>